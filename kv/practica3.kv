#:kivy 2.1.0
# Layout práctica 3

<Practica3Screen>:
    name: "practica3"
    canvas.before:
        Color:
            rgba: (240/255, 240/255, 240/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [40, 30, 40, 30]
        spacing: 20

        Label:
            text: "Práctica 3 – Intercambiador de calor"
            font_size: '22sp'
            color: (34/255, 34/255, 34/255, 1)
            bold: True
            size_hint_y: None
            height: self.texture_size[1] + 20

        BoxLayout:
            orientation: 'horizontal'
            spacing: 40

            # Inputs a la izquierda
            BoxLayout:
                orientation: 'vertical'
                spacing: 14
                size_hint_x: 0.5

                Label:
                    text: "Fluido caliente"
                    font_size: '17sp'
                    color: (46/255, 134/255, 222/255, 1)
                    bold: True
                Label:
                    text: "Temperatura inicial (°C)"
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'
                TextInput:
                    id: input_tcaliente
                    hint_text: "Ej: 70"
                    input_filter: 'float'
                    background_color: (1,1,1,1)
                    foreground_color: (34/255, 34/255, 34/255, 1)
                    multiline: False
                Label:
                    text: "Caudal (L/min)"
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'
                TextInput:
                    id: input_caudal_caliente
                    hint_text: "Ej: 2.5"
                    input_filter: 'float'
                    background_color: (1,1,1,1)
                    foreground_color: (34/255, 34/255, 34/255, 1)
                    multiline: False

                Label:
                    text: "Fluido frío"
                    font_size: '17sp'
                    color: (72/255, 219/255, 251/255, 1)
                    bold: True
                Label:
                    text: "Temperatura inicial (°C)"
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'
                TextInput:
                    id: input_tfrio
                    hint_text: "Ej: 20"
                    input_filter: 'float'
                    background_color: (1,1,1,1)
                    foreground_color: (34/255, 34/255, 34/255, 1)
                    multiline: False
                Label:
                    text: "Caudal (L/min)"
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'
                TextInput:
                    id: input_caudal_frio
                    hint_text: "Ej: 2.5"
                    input_filter: 'float'
                    background_color: (1,1,1,1)
                    foreground_color: (34/255, 34/255, 34/255, 1)
                    multiline: False

                Label:
                    text: "Tiempo de operación (min)"
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'
                TextInput:
                    id: input_tiempo
                    hint_text: "Ej: 10"
                    input_filter: 'float'
                    background_color: (1,1,1,1)
                    foreground_color: (34/255, 34/255, 34/255, 1)
                    multiline: False

            # Resultados a la derecha
            BoxLayout:
                orientation: 'vertical'
                spacing: 18
                size_hint_x: 0.5
                padding: [20, 10, 20, 10]
                canvas.before:
                    Color:
                        rgba: (72/255, 219/255, 251/255, 0.12)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

                Label:
                    text: "Resultados"
                    font_size: '18sp'
                    color: (46/255, 134/255, 222/255, 1)
                    bold: True

                Label:
                    text: "Temperatura inicial: [b]{}[/b]".format(root.temperatura_inicial)
                    markup: True
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'

                Label:
                    text: "Temperatura final: [b]{}[/b]".format(root.temperatura_final)
                    markup: True
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'

                Label:
                    text: "Tiempo de exposición: [b]{}[/b]".format(root.tiempo_exposicion)
                    markup: True
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'

                Label:
                    text: "Eficiencia térmica: [b]{}[/b]".format(root.eficiencia_termica)
                    markup: True
                    color: (34/255, 34/255, 34/255, 1)
                    font_size: '16sp'

                Label:
                    text: root.mensaje_error
                    color: (1, 0, 0, 1)
                    font_size: '15sp'

        # Botón de simulación
        Button:
            text: "Simular"
            size_hint: (0.3, None)
            height: 48
            pos_hint: {'center_x': 0.5}
            background_color: (16/255, 172/255, 132/255, 1)
            color: (1,1,1,1)
            font_size: '18sp'
            on_release: root.simular_intercambio()

        # Botón volver
        Button:
            text: "Volver"
            size_hint: (0.2, None)
            height: 42
            pos_hint: {'center_x': 0.5}
            background_color: (46/255, 134/255, 222/255, 1)
            color: (1,1,1,1)
            font_size: '16sp'
            on_release: app.root.current = "main"
